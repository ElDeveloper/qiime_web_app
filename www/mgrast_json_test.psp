<%
import json
import urllib2

req.write('<h3>MG-RAST MOBEDAC REST/JSON Test</h3>')


##### NOTE: None of this works to actually authenticate at the moment. Nothing
##### reads it on the other end. But it will still open the un-authenticated page
##### and read the sampel JSON contained there.

# Create an OpenerDirector with support for Basic HTTP Authentication...
auth_handler = urllib2.HTTPBasicAuthHandler()
auth_handler.add_password(realm='MOBEDAC',
                          uri='http://mobedac.org/api.cgi/project',
                          user='duggus',
                          passwd='humongous')
opener = urllib2.build_opener(auth_handler)
# ...and install it globally so it can be used with urlopen.
urllib2.install_opener(opener)
response = urllib2.urlopen('http://mobedac.org/api.cgi/project')
raw_data = response.read()

if raw_data:
    json_data = json.loads(raw_data)
    for item in json_data:
        req.write('<b>Request Item:</b> %s' % item)
        req.write('<br/>')
        req.write('<b>Data Type:</b> %s' % str(type(json_data[item])).replace('<', '').replace('>', ''))
        req.write('<br/>')
        req.write('<b>Contents:</b> %s' % str(json_data[item]))
        req.write('<p/>')

%>

